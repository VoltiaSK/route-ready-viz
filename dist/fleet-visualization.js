var a=Object.defineProperty;var r=(s,l,e)=>l in s?a(s,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[l]=e;var o=(s,l,e)=>r(s,typeof l!="symbol"?l+"":l,e);import{q as d,n as c,F as h}from"./assets/FleetVisualization-CeWtVhZL.js";class u extends HTMLElement{constructor(){super(...arguments);o(this,"root",null);o(this,"_jsonUrl",null);o(this,"shadowContainer",null);o(this,"stylesElement",null)}static get observedAttributes(){return["data-url"]}get jsonUrl(){return this._jsonUrl}set jsonUrl(e){this._jsonUrl=e,this.render()}connectedCallback(){console.log("FleetVisualization web component connecting to DOM"),this.shadowContainer=document.createElement("div"),this.shadowContainer.style.width="100%",this.shadowContainer.style.height="100%",this.appendChild(this.shadowContainer),this._jsonUrl=this.getAttribute("data-url"),this.loadStyles(),setTimeout(()=>{this.shadowContainer&&(console.log("Creating React root for FleetVisualization"),this.root=d.createRoot(this.shadowContainer),this.render())},100)}attributeChangedCallback(e,n,t){e==="data-url"&&n!==t&&(console.log("FleetVisualization data-url changed:",t),this._jsonUrl=t,this.render())}disconnectedCallback(){console.log("FleetVisualization web component disconnecting from DOM"),this.root&&(this.root.unmount(),this.root=null),this.stylesElement&&document.head.contains(this.stylesElement)&&document.head.removeChild(this.stylesElement)}getBaseUrl(){const e=document.getElementsByTagName("script");let n="";for(let t=0;t<e.length;t++)if(e[t].src&&e[t].src.includes("fleet-visualization")){n=e[t].src;break}return n?n.substring(0,n.lastIndexOf("/")):(console.warn("Could not find fleet-visualization script tag. Using current origin instead."),window.location.origin)}loadStyles(){if(document.getElementById("fleet-visualization-styles")){console.log("Fleet visualization styles already loaded");return}this.stylesElement=document.createElement("link"),this.stylesElement.id="fleet-visualization-styles",this.stylesElement.rel="stylesheet";const t=`${this.getBaseUrl()}/assets/main.css`;this.stylesElement.href=t,this.stylesElement.onload=()=>console.log("Fleet visualization styles loaded successfully from:",t),this.stylesElement.onerror=i=>{console.error("Failed to load fleet visualization styles:",i)},document.head.appendChild(this.stylesElement),console.log("Component styles loading from:",this.stylesElement.href)}render(){if(!this.root){console.warn("Cannot render FleetVisualization - React root not created yet");return}console.log("Rendering FleetVisualization with jsonUrl:",this._jsonUrl),this.root.render(c.createElement(h,{jsonUrl:this._jsonUrl||void 0}))}}customElements.get("fleet-visualization")||(console.log("Defining fleet-visualization custom element"),customElements.define("fleet-visualization",u));console.log("Fleet Visualization Web Component loaded");window.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded, Fleet Visualization Web Component ready");const s=document.getElementsByTagName("fleet-visualization");console.log(`Found ${s.length} fleet-visualization elements on the page`)});
